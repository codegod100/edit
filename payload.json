{"model":"glm-4.7","messages":[{"role":"system","content":"You are a helpful assistant with access to tools. Use the provided tool interface for any file operations, searching, or bash commands. Prefer bash+rg before reading files unless the user gave an explicit path. Read using explicit offset+limit. Avoid repeating identical tool calls. Finish by calling respond_text. For complex multi-step tasks, use todo_add to create a plan and todo_update to track progress."},{"role":"user","content":"You are continuing an existing coding conversation. Use prior context when relevant, but prioritize correctness and current repository state.\n\nRelevant turns:\nUser: What is 2+2?\n\nCurrent user request:\nWhat is 2+2?"}],"tools":[{"type":"function","function":{"name":"bash","description":"Execute a shell command and return stdout.","parameters":{"type":"object","properties":{"command":{"type":"string"}},"required":["command"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"respond_text","description":"Return a final plain-text response to the user when no further tools are needed.","parameters":{"type":"object","properties":{"text":{"type":"string"}},"required":["text"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"read_file","description":"Read a file and return its contents. Always provide offset and limit for bounded reads.","parameters":{"type":"object","properties":{"path":{"type":"string"},"offset":{"type":"integer","description":"Number of bytes to skip from the start (always include; use 0 first)"},"limit":{"type":"integer","description":"Maximum bytes to read (always include; use <=16384)"}},"required":["path","offset","limit"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"list_files","description":"List files and directories in a folder.","parameters":{"type":"object","properties":{"path":{"type":"string"}},"required":["path"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"write_file","description":"Write complete file contents to a path.","parameters":{"type":"object","properties":{"path":{"type":"string"},"content":{"type":"string"}},"required":["path","content"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"replace_in_file","description":"Replace text in a file. Large edits (>100 lines) require confirm=true.","parameters":{"type":"object","properties":{"path":{"type":"string"},"find":{"type":"string"},"replace":{"type":"string"},"all":{"type":"boolean"},"confirm":{"type":"boolean"}},"required":["path","find","replace"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"read","description":"Read a file and return its contents. Always provide offset and limit for bounded reads.","parameters":{"type":"object","properties":{"filePath":{"type":"string"},"offset":{"type":"integer","description":"Number of bytes to skip from the start (always include; use 0 first)"},"limit":{"type":"integer","description":"Maximum bytes to read (always include; use <=16384)"}},"required":["filePath","offset","limit"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"list","description":"List files and directories in a folder.","parameters":{"type":"object","properties":{"path":{"type":"string"}},"required":["path"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"write","description":"Write full content to a file path.","parameters":{"type":"object","properties":{"filePath":{"type":"string"},"content":{"type":"string"}},"required":["filePath","content"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"edit","description":"Replace oldString with newString in one file. Large edits (>100 lines) require confirm=true.","parameters":{"type":"object","properties":{"filePath":{"type":"string"},"oldString":{"type":"string"},"newString":{"type":"string"},"replaceAll":{"type":"boolean"},"confirm":{"type":"boolean"}},"required":["filePath","oldString","newString"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"apply_patch","description":"Apply a structured patch with add/update/delete operations.","parameters":{"type":"object","properties":{"patchText":{"type":"string"}},"required":["patchText"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"todo_add","description":"Add a new task to the todo list to track progress.","parameters":{"type":"object","properties":{"description":{"type":"string","description":"Task description"}},"required":["description"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"todo_update","description":"Update the status of a todo item (pending/in_progress/done).","parameters":{"type":"object","properties":{"id":{"type":"string","description":"Todo item ID"},"status":{"type":"string","description":"New status: pending, in_progress, or done"}},"required":["id","status"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"todo_list","description":"List all todo items with their current status.","parameters":{"type":"object","properties":{},"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"todo_remove","description":"Remove a todo item by ID.","parameters":{"type":"object","properties":{"id":{"type":"string","description":"Todo item ID to remove"}},"required":["id"],"additionalProperties":false},"strict":true}},{"type":"function","function":{"name":"todo_clear_done","description":"Clear all completed todo items.","parameters":{"type":"object","properties":{},"additionalProperties":false},"strict":true}}]}
